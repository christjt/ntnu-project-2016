This chapter shows the results of the simulations done with the framework shown in ch. \ref{ch:methodology} as well as discussing the results.
The chapter is mainly divided into two sections, the first explaining the configuration of the simulation as well as results depicted by graph-data.
The second section focuses on discussing the results in terms of the reason they have certain values and graphs, as well as a comparison between the different simulations and discovery of correlations and behavioural similarities.

\section{Experimental Results}
As stated in the chapter introduction, this section covers the results of the simulations. 
Even though the simulator supports a wide variety of different configurations, three main simulation groups chosen for this particular study.
The first group considers different connection port configurations for the robots.
The second simulation group varies the environment that the robots spend their life time in.
The third and final simulation group aims to observe the affect of local communication between the robots in a self-assembly structure(the implementation is shown in sec. \ref{sec:local_comm}).
The two first simulation groups targets to contribute to the three main self-assembly mechanisms discussed in ch. \ref{ch:background}(Self-assembly Architectures, Hardware Mechanisms and Assembly Protocols).
The local communication simulation group aims to study the affect giving the robots the ability to perform simple communication between the robots in a group.

\subsection{Port Configuration}
The first group of simulations that were done was varying the number of connection ports of the robots and their configuration.
These simulations where done such that one could record and discuss the impact of connections between the robots.
In more detail, this group of experiments where conducted such that one could record:

\begin{itemize}
	\item How the number of ports affected the general performance of the system based on the number of ports.
	\item If there is any noticeable difference in the self-assembly architecture.
	\item In what way the port configuration promotes self-assembly, both in therms of the sizes of the different robot groups, and the number of groups.
	\item How the port configuration affect the fitness of the experiment, in terms of convergence and final result.
\end{itemize}

The goal of running these simulations is to make correlations between its results to show how configuring the hardware mechanism can affect a self-assembly system.
 
For this group of simulations, the most relevant statistics will be the difference between group actions versus single robot actions.
The following pages show the recorded data for simulations using, 2 connection ports, 3 connection ports and 4 connection ports.


\begin{figure}[H]
	\centering
	\begin{subfigure}[b]{0.31\textwidth}
		\centering
		\fbox{\includegraphics[height=\linewidth]{chapters/res/2-conn.png}}
		\caption{2-ports}
	\end{subfigure}
	\begin{subfigure}[b]{0.31\textwidth}
		\centering
		\fbox{\includegraphics[height=\linewidth]{chapters/res/3-conn.png}}
		\caption{3-ports}
	\end{subfigure}
	\begin{subfigure}[b]{0.31\textwidth}
		\centering
		\fbox{\includegraphics[height=\linewidth]{chapters/res/4-conn.png}}
		\caption{4-ports}
	\end{subfigure}
	\caption{The three different port configurations used in simulation}
	\label{fig:collective-behaviour}
\end{figure}


Common configuration parameters of importance for the simulations are listed in table[x].

\begin{table}[H]
	\centering
	\label{tab-environment}
	\begin{tabular}{|c|c|}
		\hline Parameter & Value \\ 
		\hline Number of Robots & 20 \\ 
		\hline Iterations per Generation & 10000 \\
		\hline Scenarios & 3 \\ 
		\hline Generations & 150 \\ 
		\hline 
		
	\end{tabular} 
	\caption{The simulation parameters for the environments.}
\end{table}



\newpage
\pagestyle{plain}

%\input{chapters/graph-wrappers/2-ports-wrapper.tex}

\newpage

%\input{chapters/graph-wrappers/3-ports-wrapper.tex}

\newpage

%\input{chapters/graph-wrappers/4-ports-wrapper.tex}

\newpage
\pagestyle{main}

\subsection{Environment Difficulty}
The motivation for this experiment is to observe how changing the difficulty of the environment affects the evolved behaviour.
For the experiment two environment difficulties were constructed, one easier and one more difficult.
These environment difficulties were then used in the simulations so that the impact of the evolutionary pressure could be recorded and discussed.
More specifically the experiments were constructed to investigate how differing environment difficulties affect the following properties of the evolved behaviour.

\begin{itemize}
	\item The amount of robot groups formed through self-assembly, and the number of robots in each group.
	\item How the energy gathering behaviour is affected. Whether the robots prefer gathering energy individually, or as robot groups. 
	\item How the environment difficulty affects the fitness of the experiment, in terms of convergence and final result.
\end{itemize}


The environment difficulty is modified by varying the following simulation parameters.
The initial energy level the robots, the maximum amount of energy each robot can be charged with, the amount of food in the environment, and the number of predators present in the simulation.
Table \ref{tab:environment-difficulty} presents the simulation parameters that are varied for the environments.

\begin{table}[H]
	\centering
	\label{tab:environment-difficulty}
	\begin{tabular}{|c|c|c|c|c|}
		\hline  & Predators & Initial energy & Food items & Maximum energy \\ 
		\hline Easy environment & 4 & 8000 & 25 & 10000 \\ 
		\hline Hard environment & 7 & 6000 & 20 &8000 \\ 
		\hline 
		
	\end{tabular} 
	\caption{The simulation parameters for the environments.}
\end{table}

The results were obtained by running 20 simulation trials for each difficulty, where each of the trails run for 150 generations.
\subsubsection{Easy Environment}

\newpage
\pagestyle{plain}

\input{chapters/graph-wrappers/easy-wrapper.tex}

\newpage





\subsubsection{Difficult Environment}

\newpage

\input{chapters/graph-wrappers/hard-wrapper.tex}

\newpage
\pagestyle{main}

\subsection{Local Communication}

\section{Discussion}

\subsection{Environmental difficulty analysis}
The robots have two threats in the environments presented, starvation and getting killed by predators.
The robots in the easy environment receive more energy from food, and there is more food available.
From figure \ref{fig:easy-robots-starved} and figure \ref{fig:hard-robots-starved} one can see that this reduces the amount of robots dying from starvation in the easy environment, but the improvement is minuscule.

Increasing the number of predators in the environment seems to have a higher impact on the difficulty presented by an environment.
Figure \ref{fig:easy-robots-eaten} and figure \ref{fig:hard-robots-eaten} shows that increasing the amount of predators present in the environment has a greater impact on the difficulty of the environment than limiting the energy available.

One of the motivations for this experiment was to see how modifying the evolutionary pressure affects the promotion of self-assembly.
The figures \ref{fig:number-of-groups-easy} and \ref{fig:number-of-groups-hard} shows that the robots form more groups in the easy environment.
At first glance this seems to indicate that the easy environment is more successful at promoting self-assembly.
This difference in number of groups may be explained by examining the lifetime of the robots.
As explained in section \ref{sec:evaluation}, the fitness of a genome is determined by the average lifetime of a robot.
The fitness achieved in the easy environment, figure \ref{fig:easy-fitness}, is higher than than the fitness achieved in the hard environment, figure \ref{fig:hard-fitness}.
This means that the robots in the easy environment live longer, and as a consequence have more time to form groups.

However, figure \ref{fig:group-sizes-easy} and figure \ref{fig:group-sizes-hard} shows that the size of the robot groups formed are not affected by modifying the difficulty of the environment.
In both environments the average group consists of two robots.
Groups of two or more robots, as explained in section \ref{sec:description}(explain this), cannot be eaten by predators.


One can examine the energy gathering behaviour of the robots 

39.5, 109.77, 149.27 = 73.54
24, 65.86, 89.86 = 73.29


\subsection{Port configuration Analysis}
In terms of the results fetched from the port configuration simulations the first obvious remarks stem from the simulation running a three port configuration.
The results in this simulation is much weaker in terms of performance and in terms of promoting self-assembly than the simulations running 2 and 4 connection ports.
The reason for this can not be deduced completely from the empirical results, but as the only difference in these simulations are the number of ports and the alignment it is clear that the connection port configuration can greatly impact the performance of the simulation.
It can also be deduced that it is not the number of connection ports that has the primary impact of the solution, but rather the placement.
The reason one can make this claim is because the configuration using 2 connection ports and 4 connection ports perform quite similar in terms of performance.
If the number of connection ports had a great impact on the results, one would expect the simulation using 2 connection ports or 4 connection ports to yield even poorer results than the 3 connection port simulation.
This narrows the port configuration problem down to the alignment of the connection ports.

\begin{figure}[H]
	\centering
	\begin{subfigure}[b]{0.31\textwidth}
		\centering
		\fbox{\includegraphics[height=\linewidth]{chapters/res/2-ports-robot.png}}
		\caption{2-ports}
	\end{subfigure}
	\begin{subfigure}[b]{0.31\textwidth}
		\centering
		\fbox{\includegraphics[height=\linewidth]{chapters/res/3-ports-robot.png}}
		\caption{3-ports}
	\end{subfigure}
	\begin{subfigure}[b]{0.31\textwidth}
		\centering
		\fbox{\includegraphics[height=\linewidth]{chapters/res/4-ports-robot.png}}
		\caption{4-ports}
	\end{subfigure}
	\caption{The three different port configurations used in simulation}
	\label{fig:robot-port-configuration}
\end{figure}

Figure \ref{fig:robot-port-configuration} shows a closer view of the alignment that the robots initially have when spawned into the environment.
As explained in \ref{moving-ports}, the robots can rotate their connection ports as a group.
A standard strategy which is usually evolved is to either constantly rotate the connection ports in hopes of lining up the ports to another robot, or, the robots start rotating their ports when the sensors see another robot in an effort to self-assemble.
There are two main problems that the 3 connection port robots have compared to the other port configurations.
First, the initial port location does not align to any other robot.


\begin{figure}[H]
	\begin{subfigure}[t]{0.49\textwidth}
		\centering
		\fbox{\includegraphics[height=0.9\linewidth]{chapters/res/3-ports-alignment.png}}
		\caption{This figure shows how the 3 connection port initial alignment.}
		\label{3-port-guided-allignment}
	\end{subfigure}
	\begin{subfigure}[t]{0.49\textwidth}
		\centering
		\fbox{\includegraphics[height=0.9\linewidth]{chapters/res/3-ports-alignment-offset.png}}
		\caption{This figure shows how the 3 connection port alignment after all robots rotate connection ports $50\deg$.}
		\label{3-port-guided-allignment-offset}
	\end{subfigure}
\end{figure}



As seen in figure \ref{3-port-guided-allignment}, there is not any trivial alignment for the robots to connect.
One might initially presume that this is not a problem as the robots have a mechanism for rotating their ports to solve this exact issue.
However, as all the robots are running the same genome as per off-line evolution and hence the same behaviour, it becomes increasingly difficult for the robots to solve this problem.
As explained earlier the robots in this simulation tend to evolve a strategy which involves constantly spinning the connection ports in one direction.
But, as can be seen in figure \ref{3-port-guided-allignment-offset}, if all robots at some time step, were to have rotated their connection ports $50\deg$, the same issue of port alignment would still hold.




























